create database portal_db;
use portal_db;


CREATE TABLE `appointments` (
		  `apt_id` int(10) unsigned AUTO_INCREMENT,
		  `doctor_id` int(10) NOT NULL,
		  `patient_id` int(10) NOT NULL,
		  `time` DATETIME NOT NULL,
		  `reason` varchar(255) DEFAULT NULL,
		  PRIMARY KEY (`apt_id`)
		) ENGINE=InnoDB DEFAULT CHARSET=utf8;
		
CREATE TABLE `patients` (
		  `patient_id` int(10) unsigned AUTO_INCREMENT,
		  `name` varchar(255) DEFAULT NULL,
		  `number` bigint(10) UNSIGNED NOT NULL,
		  PRIMARY KEY (`patient_id`)
		) ENGINE=InnoDB DEFAULT CHARSET=utf8;
		
insert into patients (`name`, `number`) values ("Divyani", 9167484818);
insert into patients (`name`, `number`) values ("Pramod", 7894561235);
insert into patients (`name`, `number`) values ("Shivram", 1231231312);
		
CREATE TABLE `doctors` (
		  `doctor_id` int(10) unsigned AUTO_INCREMENT,
		  `name` varchar(255) DEFAULT NULL,
		  `specialization` varchar(255) DEFAULT NULL,
		  PRIMARY KEY (`doctor_id`)
		) ENGINE=InnoDB DEFAULT CHARSET=utf8;
		
insert into doctors (`name`, `specialization`) values ("Joshua", "Cardiologist");
insert into doctors (`name`, `specialization`) values ("Vikrant", "Radiologist");

		
Insert into appointments (`doctor_id`, `patient_id`, `time`, `reason`) values ("1", "2", "2021-09-15 23:18:17", "Breathless");
Insert into appointments (`doctor_id`, `patient_id`, `time`, `reason`) values ("2", "1", "2021-09-16 16:00:00", "Pain");
Insert into appointments (`doctor_id`, `patient_id`, `time`, `reason`) values ("2", "3", "2021-09-16 18:00:00", "Fever");


/// For all appointments

select d.name as "doctor", 
p.name as "patient", 
DATE(a.time) as "date", 
TIME(a.time) AS "time", 
a.reason
from 
appointments a
left join doctors d on a.doctor_id = d.doctor_id
left join patients p on a.patient_id = p.patient_id;


// For appointments of only one doctor

select 
p.name as "patient", 
DATE(a.time) as "date", 
TIME(a.time) AS "time", 
a.reason
from 
appointments a
left join doctors d on a.doctor_id = d.doctor_id
left join patients p on a.patient_id = p.patient_id
where
d.doctor_id = 2;


		
patients table
	patient id (auto)
	patient name
	patient number

doctors table
	- doc id (auto)
	- doctor name
	- doctor specialiaztion